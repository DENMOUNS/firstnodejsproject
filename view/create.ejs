<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <%- include ('partials/bootstrap') %>
    <title><%= data %></title>
</head>
<body>
    <%- include ('partials/header') %>
    <h1 class="text-center"><%= h1 %></h1>
    <form action="/store-post" method="post">
        <div class="container">
            <div class="card-body">
                <div class="form-group">
                    <label for="title">Titre du post</label>
                    <input type="text" name="titre'" id="titre" class="form-control" placeholder="veuillez entrer le titre de ce post">   
                </div>
                <div class="form-group">
                    <label for="description">Description du post</label>
                    <textarea name="description" class="form-control" id="description" cols="30" rows="10"></textarea>
                </div>
                <div class="form-group">
                    <input type="submit" class="btn btn-primary" value="Valider le traitement">
                </div>
            </div>
        </div>
    </form>
</body>
<%- include ('partials/footer.ejs') %>

<script>
    const form = document.querySelector('form');
    form.addEventListener('submit', createPost);

    function createPost(event){
        event.preventDefault();
        fetch('/store-post', {
            method: 'POST',
            body: new FormData(form)
        }).then(checkStatus)
          .catch(function (error) {
            console.error('Request failled', error);
        });
    }
</script>
</html>